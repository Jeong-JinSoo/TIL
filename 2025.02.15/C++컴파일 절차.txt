C++의 컴파일 과정

C++에서 우리가 작성한 소스코드를 실제로 실행할 수 있는 실행파일로 변환하기 위해서는 총 3가지 단계를 거쳐야만 한다.

1. 먼저 #include와 #define와 같은 전처리기 매크로들을 처리하는 전처리(PreProcessing)단계 
2. 그 뒤에 각각의 소스 파일들을 어셈플리 명령어로 변환하는 컴파일 단계
3. 그 후, 어셈블리 코드들을 실제 기계어로 이루어진 목적코드(OBJ file)로 변환해주는 어셈블 단계
4. 마지막으로 각각의 목적 코드들을 한데 모아서 하나의 실행 파일로 만들어주는 링킹(Linking)단계로 나누어 볼 수 있다.
https://modoocode.com/img/cpp/20.1.1.png
(이미지)

보통 전처리 단계, 컴파일 단계, 어셈블 단계를 모두 뭉뚱그려서 컴차일 단계 하나로 생각해도 무방하다. 즉, 많은 경우 위 그림에서 a.S나 b.S와 같은 파일 들을 생성하지 않고 바로 그냥 목적 코드로 넘어간다고 봐도 된다.

전처리 단계
Phase 1: 문자들 해석하기
Phase 2: \ 문자 해석하기
Phase 3: 전처리 토큰들로 분리하기
Phase 4: 전처리기 실행 단계
Phase 6: 인접한 문자열 합치기

컴파일

Phase 7: 해석유닛 생성
Phase 8: 인스턴스 유닛 생성

링킹

컴파일러가 생성한 목적 파일들과 외부라이브러리 파일들을 모아서 실행 파일을 생성한다.